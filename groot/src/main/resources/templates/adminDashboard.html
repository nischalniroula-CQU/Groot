<!DOCTYPE html>
<html data-bs-theme="light" lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Groot - Dashboard</title>
    <link rel="icon" type="image/x-icon" href="/img/favicon.png">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Space+Grotesk&amp;display=swap">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body style="--bs-primary: #13456a;--bs-primary-rgb: 19,69,106;--bs-secondary: #FF8889;--bs-secondary-rgb: 255,136,137;">
    
    <header id="adminHeader"></header>
    
    <div class="container" style="margin-top: 2vw;">
        <div class="row">
            <h4>Admin Dashboard</h4>
            
        </div>
    </div>
    <div class="container" style="margin-top: 2vw; margin-bottom: 2vw;">
	    <div class="row">
	        <div class="col-xl-4 col-lg-4">
	            <div class="card l-bg-cherry">
	                <div class="card-statistic-3 p-4">
	                    <div class="card-icon card-icon-large"><i class="fas fa-shopping-cart"></i></div>
	                    <div class="mb-4">
	                        <h5 class="card-title mb-0"><a href="adminBusinesses">Business</a></h5>
	                    </div>
	                    <div class="row align-items-center mb-2 d-flex">
	                        <div class="col-8">
	                            <h2 class="d-flex align-items-center mb-0">
	                                <span id="businessCounts"></span>
    								<span id="businessError" style="color: red;"></span>
	                            </h2>
	                        </div>
	                    </div>
	                    <div class="progress mt-1 " data-height="8" style="height: 8px;">
	                        <div class="progress-bar l-bg-cyan" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
	                    </div>
	                </div>
	            </div>
	        </div>
	        <div class="col-xl-4 col-lg-4">
	            <div class="card l-bg-blue-dark">
	                <div class="card-statistic-3 p-4">
	                    <div class="card-icon card-icon-large"><i class="fas fa-users"></i></div>
	                    <div class="mb-4">
	                        <h5 class="card-title mb-0"><a href="adminEvents">Events</a></h5>
	                    </div>
	                    <div class="row align-items-center mb-2 d-flex">
	                        <div class="col-8">
	                            <h2 class="d-flex align-items-center mb-0">
	                                <span id="eventCounts"></span>
    								<span id="eventError" style="color: red;"></span>
	                            </h2>
	                        </div>
	                    </div>
	                    <div class="progress mt-1 " data-height="8" style="height: 8px;">
	                        <div class="progress-bar l-bg-green" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
	                    </div>
	                </div>
	            </div>
	        </div>
	        <div class="col-xl-4 col-lg-4">
	            <div class="card l-bg-green-dark">
	                <div class="card-statistic-3 p-4">
	                    <div class="card-icon card-icon-large"><i class="fas fa-ticket-alt"></i></div>
	                    <div class="mb-4">
	                        <h5 class="card-title mb-0"><a href="adminUsers">Users</a></h5>
	                    </div>
	                    <div class="row align-items-center mb-2 d-flex">
	                        <div class="col-8">
	                            <h2 class="d-flex align-items-center mb-0">
	                                <span id="usersCounts"></span>
    								<span id="usersError" style="color: red;"></span>
	                            </h2>
	                        </div>
	                    </div>
	                    <div class="progress mt-1 " data-height="8" style="height: 8px;">
	                        <div class="progress-bar l-bg-orange" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
	                    </div>
	                </div>
	            </div>
	        </div>
	        <div class="col-xl-4 col-lg-4">
	            <div class="card l-bg-green-dark">
	                <div class="card-statistic-3 p-4">
	                    <div class="card-icon card-icon-large"><i class="fas fa-ticket-alt"></i></div>
	                    <div class="mb-4">
	                        <h5 class="card-title mb-0"><a href="adminProducts">Products</a></h5>
	                    </div>
	                    <div class="row align-items-center mb-2 d-flex">
	                        <div class="col-8">
	                            <h2 class="d-flex align-items-center mb-0">
	                                <span id="productCounts"></span>
    								<span id="productError" style="color: red;"></span>
	                            </h2>
	                        </div>
	                    </div>
	                    <div class="progress mt-1 " data-height="8" style="height: 8px;">
	                        <div class="progress-bar l-bg-orange" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
	                    </div>
	                </div>
	            </div>
	        </div>
	    </div>
	</div>
	<script>
		$(document).ready(function() {
	        // List of entity types
	        var entityTypes = ['business', 'event', 'users', 'product'];
	
	        // Function to fetch and display counts for each entity type
	        entityTypes.forEach(function(entityType) {
	            $.ajax({
	                url: '/api/count/allCounts',
	                type: 'GET',
	                contentType: 'application/json',
	                data: { entityType: entityType }, // Send entityType as a query parameter
	                success: function(response) {
	                    $('#' + entityType + 'Counts').text(response); // Update respective span by ID
	                },
	                error: function(xhr) {
	                    console.log('Failed to retrieve count for ' + entityType + ':', xhr.responseText);
	                    $('#' + entityType + 'Error').text('Failed to retrieve count: ' + xhr.responseText); // Update respective error span by ID
	                }
	            });
	        });
	    });
	</script>
    <footer id="footer"></footer>
    <script src="/js/custom_functions.js"></script>
    <script src="/js/script.js"></script>
    <script>
    $(document).ready(function() {
        // Load the header and footer into div
        $('#adminHeader').load('adminHeader');
        $('#footer').load('footer');
    });
    </script>
</body>

</html>